<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>CloudFormation 30-Day Mastery (CloudFormationMastery)</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#f59e0b">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
:root{
  --bg:#0b1220; --card:#121a2a; --muted:#9fb3c8; --accent:#f59e0b; --accent2:#f97316; --border:#1f2a44; --text:#e6edf3;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:var(--bg);color:var(--text)}
header{padding:22px 16px 18px;background:linear-gradient(180deg,var(--accent2) 0%, var(--accent) 80%);color:#2a1600;position:sticky;top:0;z-index:10}
header h1{margin:0 0 6px;font-size:1.35rem}
header p{margin:0;opacity:.95}
.pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#fff7ed;color:#7c2d12;font-size:.8rem;margin-left:6px}

.container{padding:12px;display:grid;gap:12px}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:0 6px 18px rgba(0,0,0,.25)}
.center{text-align:center}

.stats{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.progress-ring{width:120px;height:120px;margin:auto;position:relative}
.progress-ring svg{transform:rotate(-90deg)}
.progress-ring .label{position:absolute;inset:0;display:grid;place-items:center;font-weight:800}
small.badge{display:inline-block;margin-top:6px;padding:3px 8px;border:1px solid #3b2a14;border-radius:999px;background:#1b1a11;color:#ffdca8}

.alerts{display:grid;gap:8px}
.btn{appearance:none;border:1px solid var(--border);background:#0e1a2b;color:var(--text);padding:10px 12px;border-radius:12px;font-weight:700}
.btn.primary{background:var(--accent);border-color:#b45309;color:#231504}
.btn.ghost{background:#0e1a2b}

#dayNav.card{display:flex;justify-content:center;gap:8px;align-items:center}
#dayNav .jump{display:flex;flex-wrap:wrap;gap:8px;justify-content:center}
#dayNav .jump a{border:1px solid var(--border);border-radius:10px;padding:6px 10px;text-decoration:none;color:var(--text);background:#0e1e31}
#dayNav .jump a:hover{border-color:var(--accent)}

.day-card{display:none}
.day-card.active{display:block}
.day-head{display:flex;align-items:center;justify-content:space-between;gap:8px}
.day-head h2{margin:6px 0;font-size:1.08rem;text-align:center;flex:1}
.nav{border:1px solid var(--border);background:#0e1e31;color:var(--text);padding:8px 10px;border-radius:10px}
.tasks{margin:8px 0 0 0;padding-left:0;list-style:none;display:grid;gap:8px}
.tasks input[type="checkbox"]{transform:scale(1.2);margin-right:8px}
.links a{display:inline-block;margin:8px 8px 0 0;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#0d1d33;color:var(--text);text-decoration:none;font-size:.9rem}
.complete{margin-top:12px;width:100%}

.footer{color:var(--muted);text-align:center;padding:24px 8px 56px}
.banner{padding:10px;border-radius:12px;background:#1b1409;border:1px solid #3b2a14}
.kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;background:#0e2036;border:1px solid var(--border);padding:2px 6px;border-radius:6px}
</style>
</head>
<body>
<header>
  <h1>üèóÔ∏è CloudFormation 30-Day Mastery <span class="pill">CloudFormationMastery</span></h1>
  <p>Stacks ‚Ä¢ Parameters ‚Ä¢ Change Sets ‚Ä¢ Drift ‚Ä¢ Nested Stacks ‚Ä¢ StackSets ‚Ä¢ SAM</p>
</header>

<main class="container">
  <section class="stats">
    <div class="card center">
      <div class="progress-ring" aria-label="Progress">
        <svg viewBox="0 0 120 120" width="120" height="120" aria-hidden="true">
          <circle cx="60" cy="60" r="54" stroke="#3a2a12" stroke-width="12" fill="none"></circle>
          <circle id="ring" cx="60" cy="60" r="54" stroke="#f59e0b" stroke-width="12" fill="none" stroke-linecap="round" stroke-dasharray="339.292" stroke-dashoffset="339.292"></circle>
        </svg>
        <div class="label"><span id="progressPct">0%</span></div>
      </div>
      <small class="badge"><span id="completedDays">0</span>/30 days completed</small>
    </div>

    <div class="card">
      <div class="banner"><b>Daily notifications</b>: <span id="notifStatus">off</span></div>
      <div class="alerts">
        <button class="btn primary" id="enableAlerts">Enable Alerts</button>
        <button class="btn ghost" id="resetBtn">Reset</button>
      </div>
      <small class="badge">Streak: <span id="streak">0</span> days</small>
    </div>
  </section>

  <section id="dayNav" class="card">
    <div>Current Day: <b><span id="currentDay">1</span></b></div>
    <div class="jump" id="jump"></div>
  </section>

  <!-- Day cards 1‚Äì30 -->
  <!-- Week 1 -->
  <section class="card day-card" id="day-1" role="region" aria-labelledby="title-1">
    <div class="day-head">
      <button class="nav prev" data-go="0" disabled>‚Üê Prev</button>
      <h2 id="title-1">Day 1 ‚Äî CloudFormation Fundamentals</h2>
      <button class="nav next" data-go="2">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="1" data-task="0"> Mental model: templates ‚Üí stacks ‚Üí events ‚Üí resources.</label></li>
      <li><label><input type="checkbox" data-day="1" data-task="1"> Create hello-world template with <span class="kbd">AWS::S3::Bucket</span>.</label></li>
      <li><label><input type="checkbox" data-day="1" data-task="2"> Deploy via console & CLI: <span class="kbd">create-stack</span>, <span class="kbd">describe-stacks</span>.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html" target="_blank" rel="noopener">CFN: What Is</a>
      <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/" target="_blank" rel="noopener">CFN CLI</a>
    </div>
    <button class="complete" data-complete="1">Mark Day 1 Complete</button>
  </section>

  <section class="card day-card" id="day-2">
    <div class="day-head">
      <button class="nav prev" data-go="1">‚Üê Prev</button>
      <h2 id="title-2">Day 2 ‚Äî Template Anatomy & YAML</h2>
      <button class="nav next" data-go="3">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="2" data-task="0"> Sections: <span class="kbd">AWSTemplateFormatVersion</span>, <span class="kbd">Description</span>, <span class="kbd">Parameters</span>, <span class="kbd">Resources</span>, <span class="kbd">Outputs</span>.</label></li>
      <li><label><input type="checkbox" data-day="2" data-task="1"> Convert JSON‚ÜîYAML; use comments & long strings.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-anatomy.html" target="_blank" rel="noopener">Template Anatomy</a>
    </div>
    <button class="complete" data-complete="2">Mark Day 2 Complete</button>
  </section>

  <section class="card day-card" id="day-3">
    <div class="day-head">
      <button class="nav prev" data-go="2">‚Üê Prev</button>
      <h2 id="title-3">Day 3 ‚Äî Parameters & Constraints</h2>
      <button class="nav next" data-go="4">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="3" data-task="0"> Add parameters (Strings, Numbers, Lists) with <span class="kbd">AllowedValues</span>, <span class="kbd">AllowedPattern</span>, <span class="kbd">NoEcho</span>.</label></li>
      <li><label><input type="checkbox" data-day="3" data-task="1"> Pass params via CLI and json files.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/parameters-section-structure.html" target="_blank" rel="noopener">Parameters</a>
    </div>
    <button class="complete" data-complete="3">Mark Day 3 Complete</button>
  </section>

  <section class="card day-card" id="day-4">
    <div class="day-head">
      <button class="nav prev" data-go="3">‚Üê Prev</button>
      <h2 id="title-4">Day 4 ‚Äî Mappings & Conditions</h2>
      <button class="nav next" data-go="5">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="4" data-task="0"> Create <span class="kbd">Mappings</span> and use <span class="kbd">Fn::FindInMap</span>.</label></li>
      <li><label><input type="checkbox" data-day="4" data-task="1"> Use <span class="kbd">Conditions</span> with <span class="kbd">Fn::If</span> to toggle resources.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/mappings-section-structure.html" target="_blank" rel="noopener">Mappings</a>
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" target="_blank" rel="noopener">Conditions</a>
    </div>
    <button class="complete" data-complete="4">Mark Day 4 Complete</button>
  </section>

  <section class="card day-card" id="day-5">
    <div class="day-head">
      <button class="nav prev" data-go="4">‚Üê Prev</button>
      <h2 id="title-5">Day 5 ‚Äî Intrinsic Functions</h2>
      <button class="nav next" data-go="6">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="5" data-task="0"> Practice <span class="kbd">Ref</span>, <span class="kbd">GetAtt</span>, <span class="kbd">Sub</span>, <span class="kbd">Join</span>, <span class="kbd">Select</span>, <span class="kbd">Split</span>.</label></li>
      <li><label><input type="checkbox" data-day="5" data-task="1"> Build names & ARNs dynamically with <span class="kbd">Fn::Sub</span>.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference.html" target="_blank" rel="noopener">Intrinsic Functions</a>
    </div>
    <button class="complete" data-complete="5">Mark Day 5 Complete</button>
  </section>

  <section class="card day-card" id="day-6">
    <div class="day-head">
      <button class="nav prev" data-go="5">‚Üê Prev</button>
      <h2 id="title-6">Day 6 ‚Äî Outputs & Cross-Stack Exports</h2>
      <button class="nav next" data-go="7">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="6" data-task="0"> Create <span class="kbd">Outputs</span> with <span class="kbd">Export</span>.</label></li>
      <li><label><input type="checkbox" data-day="6" data-task="1"> Consume with <span class="kbd">Fn::ImportValue</span> from another stack.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/outputs-section-structure.html" target="_blank" rel="noopener">Outputs</a>
    </div>
    <button class="complete" data-complete="6">Mark Day 6 Complete</button>
  </section>

  <section class="card day-card" id="day-7">
    <div class="day-head">
      <button class="nav prev" data-go="6">‚Üê Prev</button>
      <h2 id="title-7">Day 7 ‚Äî Resource Lifecycles & DependsOn</h2>
      <button class="nav next" data-go="8">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="7" data-task="0"> Learn when updates cause replacement; use <span class="kbd">DependsOn</span>.</label></li>
      <li><label><input type="checkbox" data-day="7" data-task="1"> Use creation/update policies for order/health.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html" target="_blank" rel="noopener">Resource Types</a>
    </div>
    <button class="complete" data-complete="7">Mark Day 7 Complete</button>
  </section>

  <!-- Week 2 -->
  <section class="card day-card" id="day-8">
    <div class="day-head">
      <button class="nav prev" data-go="7">‚Üê Prev</button>
      <h2 id="title-8">Day 8 ‚Äî VPC Baseline</h2>
      <button class="nav next" data-go="9">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="8" data-task="0"> VPC with 2 AZs public/private subnets, RTs, IGW, NAT GW.</label></li>
      <li><label><input type="checkbox" data-day="8" data-task="1"> Outputs: subnet IDs, VPC ID.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html" target="_blank" rel="noopener">VPC</a>
    </div>
    <button class="complete" data-complete="8">Mark Day 8 Complete</button>
  </section>

  <section class="card day-card" id="day-9">
    <div class="day-head">
      <button class="nav prev" data-go="8">‚Üê Prev</button>
      <h2 id="title-9">Day 9 ‚Äî Security Groups & NACLs</h2>
      <button class="nav next" data-go="10">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="9" data-task="0"> Create SGs for ALB, EC2, RDS; restrict by SG and CIDR.</label></li>
      <li><label><input type="checkbox" data-day="9" data-task="1"> Optional: NACLs for public/private subnets.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-security-groups.html" target="_blank" rel="noopener">Security Groups</a>
    </div>
    <button class="complete" data-complete="9">Mark Day 9 Complete</button>
  </section>

  <section class="card day-card" id="day-10">
    <div class="day-head">
      <button class="nav prev" data-go="9">‚Üê Prev</button>
      <h2 id="title-10">Day 10 ‚Äî EC2 + IAM + UserData</h2>
      <button class="nav next" data-go="11">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="10" data-task="0"> Launch Template with IAM role & SSM Agent via <span class="kbd">UserData</span>.</label></li>
      <li><label><input type="checkbox" data-day="10" data-task="1"> Store AMI via parameter; output instance profile.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html" target="_blank" rel="noopener">EC2 User Data</a>
      <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/ssm-agent.html" target="_blank" rel="noopener">SSM Agent</a>
    </div>
    <button class="complete" data-complete="10">Mark Day 10 Complete</button>
  </section>

  <section class="card day-card" id="day-11">
    <div class="day-head">
      <button class="nav prev" data-go="10">‚Üê Prev</button>
      <h2 id="title-11">Day 11 ‚Äî ALB & Target Groups</h2>
      <button class="nav next" data-go="12">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="11" data-task="0"> ALB, TG, listener (HTTP 80) with health check path.</label></li>
      <li><label><input type="checkbox" data-day="11" data-task="1"> Wire SGs: internet ‚Üí ALB ‚Üí instances.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html" target="_blank" rel="noopener">ALB</a>
    </div>
    <button class="complete" data-complete="11">Mark Day 11 Complete</button>
  </section>

  <section class="card day-card" id="day-12">
    <div class="day-head">
      <button class="nav prev" data-go="11">‚Üê Prev</button>
      <h2 id="title-12">Day 12 ‚Äî Auto Scaling Group</h2>
      <button class="nav next" data-go="13">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="12" data-task="0"> ASG with Launch Template; attach TG; rolling updates.</label></li>
      <li><label><input type="checkbox" data-day="12" data-task="1"> Health checks; instance warm-up.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/auto-scaling-groups.html" target="_blank" rel="noopener">ASG</a>
    </div>
    <button class="complete" data-complete="12">Mark Day 12 Complete</button>
  </section>

  <section class="card day-card" id="day-13">
    <div class="day-head">
      <button class="nav prev" data-go="12">‚Üê Prev</button>
      <h2 id="title-13">Day 13 ‚Äî RDS (or Aurora) Subnet Group</h2>
      <button class="nav next" data-go="14">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="13" data-task="0"> DB subnet group; RDS MySQL (or Aurora) instance/cluster.</label></li>
      <li><label><input type="checkbox" data-day="13" data-task="1"> Secrets via SSM/Secrets Manager (no plaintext).</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Welcome.html" target="_blank" rel="noopener">RDS</a>
      <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html" target="_blank" rel="noopener">Secrets Manager</a>
    </div>
    <button class="complete" data-complete="13">Mark Day 13 Complete</button>
  </section>

  <section class="card day-card" id="day-14">
    <div class="day-head">
      <button class="nav prev" data-go="13">‚Üê Prev</button>
      <h2 id="title-14">Day 14 ‚Äî S3 Buckets & Policies</h2>
      <button class="nav next" data-go="15">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="14" data-task="0"> S3 with versioning, SSE, least-priv policy.</label></li>
      <li><label><input type="checkbox" data-day="14" data-task="1"> Optional: static site hosting (with CloudFront OAC).</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/Welcome.html" target="_blank" rel="noopener">S3</a>
    </div>
    <button class="complete" data-complete="14">Mark Day 14 Complete</button>
  </section>

  <!-- Week 3 -->
  <section class="card day-card" id="day-15">
    <div class="day-head">
      <button class="nav prev" data-go="14">‚Üê Prev</button>
      <h2 id="title-15">Day 15 ‚Äî CloudFront & Route 53</h2>
      <button class="nav next" data-go="16">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="15" data-task="0"> CF distribution (S3 origin + OAC); behaviors.</label></li>
      <li><label><input type="checkbox" data-day="15" data-task="1"> Alias record in Route 53.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Introduction.html" target="_blank" rel="noopener">CloudFront</a>
      <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/Welcome.html" target="_blank" rel="noopener">Route 53</a>
    </div>
    <button class="complete" data-complete="15">Mark Day 15 Complete</button>
  </section>

  <section class="card day-card" id="day-16">
    <div class="day-head">
      <button class="nav prev" data-go="15">‚Üê Prev</button>
      <h2 id="title-16">Day 16 ‚Äî IAM Roles & Policies</h2>
      <button class="nav next" data-go="17">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="16" data-task="0"> Roles for EC2/Lambda with managed + inline policies.</label></li>
      <li><label><input type="checkbox" data-day="16" data-task="1"> Use condition keys, principals, and boundaries.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html" target="_blank" rel="noopener">IAM Policies</a>
    </div>
    <button class="complete" data-complete="16">Mark Day 16 Complete</button>
  </section>

  <section class="card day-card" id="day-17">
    <div class="day-head">
      <button class="nav prev" data-go="16">‚Üê Prev</button>
      <h2 id="title-17">Day 17 ‚Äî CloudWatch Logs & Alarms</h2>
      <button class="nav next" data-go="18">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="17" data-task="0"> LogGroups for app & system; retention policy.</label></li>
      <li><label><input type="checkbox" data-day="17" data-task="1"> Alarms on CPU/5XX; notify via SNS topic.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/WhatIsCloudWatch.html" target="_blank" rel="noopener">CloudWatch</a>
      <a href="https://docs.aws.amazon.com/sns/latest/dg/welcome.html" target="_blank" rel="noopener">SNS</a>
    </div>
    <button class="complete" data-complete="17">Mark Day 17 Complete</button>
  </section>

  <section class="card day-card" id="day-18">
    <div class="day-head">
      <button class="nav prev" data-go="17">‚Üê Prev</button>
      <h2 id="title-18">Day 18 ‚Äî Lambda + API Gateway</h2>
      <button class="nav next" data-go="19">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="18" data-task="0"> Lambda function, IAM role, LogGroup, API Gateway integration.</label></li>
      <li><label><input type="checkbox" data-day="18" data-task="1"> Outputs: API URL; alias for canary (optional).</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/lambda/latest/dg/welcome.html" target="_blank" rel="noopener">Lambda</a>
      <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html" target="_blank" rel="noopener">API Gateway</a>
    </div>
    <button class="complete" data-complete="18">Mark Day 18 Complete</button>
  </section>

  <section class="card day-card" id="day-19">
    <div class="day-head">
      <button class="nav prev" data-go="18">‚Üê Prev</button>
      <h2 id="title-19">Day 19 ‚Äî EventBridge, SQS, DLQ</h2>
      <button class="nav next" data-go="20">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="19" data-task="0"> Rule ‚Üí target Lambda; SQS queue with DLQ for retries.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-what-is.html" target="_blank" rel="noopener">EventBridge</a>
      <a href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/welcome.html" target="_blank" rel="noopener">SQS</a>
    </div>
    <button class="complete" data-complete="19">Mark Day 19 Complete</button>
  </section>

  <section class="card day-card" id="day-20">
    <div class="day-head">
      <button class="nav prev" data-go="19">‚Üê Prev</button>
      <h2 id="title-20">Day 20 ‚Äî Secrets & Parameters (Dynamic Refs)</h2>
      <button class="nav next" data-go="21">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="20" data-task="0"> Use <span class="kbd">{{resolve:secretsmanager:‚Ä¶}}</span> and SSM Parameter Store.</label></li>
      <li><label><input type="checkbox" data-day="20" data-task="1"> Rotate secrets policy.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/dynamic-references.html" target="_blank" rel="noopener">Dynamic Refs</a>
    </div>
    <button class="complete" data-complete="20">Mark Day 20 Complete</button>
  </section>

  <section class="card day-card" id="day-21">
    <div class="day-head">
      <button class="nav prev" data-go="20">‚Üê Prev</button>
      <h2 id="title-21">Day 21 ‚Äî ECS Fargate Service</h2>
      <button class="nav next" data-go="22">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="21" data-task="0"> ECR repo; ECS cluster; task definition; service behind ALB.</label></li>
      <li><label><input type="checkbox" data-day="21" data-task="1"> Auto scaling & health checks.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/Welcome.html" target="_blank" rel="noopener">ECS</a>
      <a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/what-is-ecr.html" target="_blank" rel="noopener">ECR</a>
    </div>
    <button class="complete" data-complete="21">Mark Day 21 Complete</button>
  </section>

  <!-- Week 4 -->
  <section class="card day-card" id="day-22">
    <div class="day-head">
      <button class="nav prev" data-go="21">‚Üê Prev</button>
      <h2 id="title-22">Day 22 ‚Äî ECR Policies & Lifecycle</h2>
      <button class="nav next" data-go="23">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="22" data-task="0"> Lifecycle policy; scan on push; restrict repo access.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/ecr-repository-policies.html" target="_blank" rel="noopener">ECR Policies</a>
    </div>
    <button class="complete" data-complete="22">Mark Day 22 Complete</button>
  </section>

  <section class="card day-card" id="day-23">
    <div class="day-head">
      <button class="nav prev" data-go="22">‚Üê Prev</button>
      <h2 id="title-23">Day 23 ‚Äî Nested Stacks & StackSets</h2>
      <button class="nav next" data-go="24">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="23" data-task="0"> Break infra into nested stacks (vpc.yml, app.yml).</label></li>
      <li><label><input type="checkbox" data-day="23" data-task="1"> Try StackSets to deploy across accounts/regions.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-nested-stacks.html" target="_blank" rel="noopener">Nested Stacks</a>
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" target="_blank" rel="noopener">StackSets</a>
    </div>
    <button class="complete" data-complete="23">Mark Day 23 Complete</button>
  </section>

  <section class="card day-card" id="day-24">
    <div class="day-head">
      <button class="nav prev" data-go="23">‚Üê Prev</button>
      <h2 id="title-24">Day 24 ‚Äî Change Sets & Policies</h2>
      <button class="nav next" data-go="25">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="24" data-task="0"> Create/preview Change Sets; add <span class="kbd">StackPolicy</span>.</label></li>
      <li><label><input type="checkbox" data-day="24" data-task="1"> Use <span class="kbd">DeletionPolicy</span>/<span class="kbd">UpdateReplacePolicy</span>; rollback triggers.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets.html" target="_blank" rel="noopener">Change Sets</a>
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/protect-stack-resources-from-updates.html" target="_blank" rel="noopener">Stack Policies</a>
    </div>
    <button class="complete" data-complete="24">Mark Day 24 Complete</button>
  </section>

  <section class="card day-card" id="day-25">
    <div class="day-head">
      <button class="nav prev" data-go="24">‚Üê Prev</button>
      <h2 id="title-25">Day 25 ‚Äî Linting & Testing (cfn-lint, taskcat, Guard)</h2>
      <button class="nav next" data-go="26">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="25" data-task="0"> Run <span class="kbd">cfn-lint</span> locally & in CI.</label></li>
      <li><label><input type="checkbox" data-day="25" data-task="1"> Use <span class="kbd">taskcat</span> to test deploy; add <span class="kbd">cfn-guard</span> rules.</label></li>
    </ul>
    <div class="links">
      <a href="https://github.com/aws-cloudformation/cfn-lint" target="_blank" rel="noopener">cfn-lint</a>
      <a href="https://github.com/aws-quickstart/taskcat" target="_blank" rel="noopener">taskcat</a>
      <a href="https://github.com/aws-cloudformation/cloudformation-guard" target="_blank" rel="noopener">CFN Guard</a>
    </div>
    <button class="complete" data-complete="25">Mark Day 25 Complete</button>
  </section>

  <section class="card day-card" id="day-26">
    <div class="day-head">
      <button class="nav prev" data-go="25">‚Üê Prev</button>
      <h2 id="title-26">Day 26 ‚Äî Drift & Resource Import</h2>
      <button class="nav next" data-go="27">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="26" data-task="0"> Run drift detection; fix differences.</label></li>
      <li><label><input type="checkbox" data-day="26" data-task="1"> Import existing resources into a stack (no recreate).</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/detect-drift-stack.html" target="_blank" rel="noopener">Drift Detection</a>
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resource-import-new-stack.html" target="_blank" rel="noopener">Resource Import</a>
    </div>
    <button class="complete" data-complete="26">Mark Day 26 Complete</button>
  </section>

  <section class="card day-card" id="day-27">
    <div class="day-head">
      <button class="nav prev" data-go="26">‚Üê Prev</button>
      <h2 id="title-27">Day 27 ‚Äî SAM (Serverless)</h2>
      <button class="nav next" data-go="28">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="27" data-task="0"> Use <span class="kbd">Transform: AWS::Serverless-2016-10-31</span> with a Lambda + API.</label></li>
      <li><label><input type="checkbox" data-day="27" data-task="1"><span class="kbd">sam build</span> & <span class="kbd">sam package</span> to S3; deploy.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/what-is-sam.html" target="_blank" rel="noopener">AWS SAM</a>
    </div>
    <button class="complete" data-complete="27">Mark Day 27 Complete</button>
  </section>

  <section class="card day-card" id="day-28">
    <div class="day-head">
      <button class="nav prev" data-go="27">‚Üê Prev</button>
      <h2 id="title-28">Day 28 ‚Äî Macros, Hooks & Custom Resources</h2>
      <button class="nav next" data-go="29">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="28" data-task="0"> Create a simple custom resource (Lambda) for setup work.</label></li>
      <li><label><input type="checkbox" data-day="28" data-task="1"> Review Hooks/Macros for org-wide rules.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" target="_blank" rel="noopener">Macros</a>
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/hooks-reference.html" target="_blank" rel="noopener">Hooks</a>
    </div>
    <button class="complete" data-complete="28">Mark Day 28 Complete</button>
  </section>

  <section class="card day-card" id="day-29">
    <div class="day-head">
      <button class="nav prev" data-go="28">‚Üê Prev</button>
      <h2 id="title-29">Day 29 ‚Äî Cost, Security, Tagging, Reuse</h2>
      <button class="nav next" data-go="30">Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="29" data-task="0"> Standardize tags; reuse via mappings/params; cost controls.</label></li>
      <li><label><input type="checkbox" data-day="29" data-task="1"> Termination protection; permissions boundaries review.</label></li>
    </ul>
    <div class="links">
      <a href="https://docs.aws.amazon.com/whitepapers/latest/cf-best-practices/welcome.html" target="_blank" rel="noopener">CFN Best Practices</a>
    </div>
    <button class="complete" data-complete="29">Mark Day 29 Complete</button>
  </section>

  <section class="card day-card" id="day-30">
    <div class="day-head">
      <button class="nav prev" data-go="29">‚Üê Prev</button>
      <h2 id="title-30">Day 30 ‚Äî Final Project</h2>
      <button class="nav next" data-go="31" disabled>Next ‚Üí</button>
    </div>
    <ul class="tasks">
      <li><label><input type="checkbox" data-day="30" data-task="0"> Multi-env (VPC + ALB + ASG/ECS + RDS/DynamoDB) with params & change sets.</label></li>
      <li><label><input type="checkbox" data-day="30" data-task="1"> Enable drift detection, alarms, guarded updates.</label></li>
      <li><label><input type="checkbox" data-day="30" data-task="2"> Optional: integrate CI validation (see CICDMastery Day 23).</label></li>
    </ul>
    <button class="complete" data-complete="30">Mark Day 30 Complete</button>
  </section>

  <section class="footer">¬© CloudFormationMastery ‚Äî Install for best experience (Add to Home Screen). Works offline.</section>
</main>

<script>
const TOTAL = 30;
const stateKey = 'cfn_state_v1';
let state = JSON.parse(localStorage.getItem(stateKey) || '{"completed":{}, "tasks":{}, "streak":0, "lastOpen":null, "notif":false, "current":1}');

// Jump links
const jump = document.getElementById('jump');
jump.innerHTML = Array.from({length: TOTAL}, (_, i) => `<a href="#day-${i+1}" data-go="${i+1}">Day ${i+1}</a>`).join('');
jump.querySelectorAll('a').forEach(a => a.addEventListener('click', (e) => {
  e.preventDefault();
  const go = parseInt(a.dataset.go, 10);
  showDay(go);
  document.getElementById(`day-${go}`).scrollIntoView({behavior:'smooth', block:'start'});
}));

// Progress ring
function updateProgress() {
  const completedCount = Object.keys(state.completed).length;
  const pct = Math.round((completedCount / TOTAL) * 100);
  document.getElementById('completedDays').textContent = completedCount;
  document.getElementById('progressPct').textContent = pct + '%';
  const C = 2 * Math.PI * 54;
  const off = C * (1 - pct/100);
  const ring = document.getElementById('ring');
  ring.setAttribute('stroke-dasharray', C.toFixed(3));
  ring.setAttribute('stroke-dashoffset', off.toFixed(3));
}

// Show day
function showDay(n) {
  n = Math.min(Math.max(1, n), TOTAL);
  document.querySelectorAll('.day-card').forEach(el => el.classList.remove('active'));
  const el = document.getElementById('day-' + n);
  if (el) el.classList.add('active');
  state.current = n;
  document.getElementById('currentDay').textContent = n;
  save();
}

// Save
function save() {
  localStorage.setItem(stateKey, JSON.stringify(state));
}

// Streak
function updateStreak() {
  const today = new Date().toISOString().slice(0,10);
  if (state.lastOpen !== today) {
    const yest = new Date(); yest.setDate(yest.getDate()-1);
    const yestStr = yest.toISOString().slice(0,10);
    if (state.lastOpen === yestStr) state.streak += 1;
    else state.streak = 1;
    state.lastOpen = today;
    save();
  }
  document.getElementById('streak').textContent = state.streak || 0;
}

// Task checkboxes persist
document.querySelectorAll('.tasks input[type="checkbox"]').forEach(cb => {
  const d = cb.dataset.day; const t = cb.dataset.task;
  const checked = state.tasks[d]?.includes(parseInt(t));
  cb.checked = !!checked;
  cb.addEventListener('change', () => {
    state.tasks[d] = state.tasks[d] || [];
    const idx = state.tasks[d].indexOf(parseInt(t));
    if (cb.checked) { if (idx === -1) state.tasks[d].push(parseInt(t)); }
    else { if (idx !== -1) state.tasks[d].splice(idx,1); }
    save();
  });
});

// Complete buttons
document.querySelectorAll('.complete').forEach(btn => {
  btn.addEventListener('click', () => {
    const d = btn.dataset.complete;
    state.completed[d] = true;
    save();
    updateProgress();
    if (parseInt(d) < TOTAL) showDay(parseInt(d)+1);
  });
});

// Prev/Next nav
document.querySelectorAll('.nav').forEach(b => b.addEventListener('click', () => {
  const go = parseInt(b.dataset.go);
  if (!isNaN(go)) showDay(go);
}));

// Notifications (basic)
const notifStatus = document.getElementById('notifStatus');
function updateNotifUI(){ notifStatus.textContent = state.notif ? 'on' : 'off'; }
updateNotifUI();
document.getElementById('enableAlerts').addEventListener('click', async () => {
  if (!('Notification' in window)) return alert('Notifications not supported.');
  const perm = await Notification.requestPermission();
  if (perm === 'granted') {
    state.notif = true; save(); updateNotifUI();
    if (navigator.serviceWorker) {
      const reg = await navigator.serviceWorker.getRegistration();
      reg?.showNotification('CloudFormationMastery: Daily reminder set!', { body: "Come back for today's CFN challenge." });
    }
  }
});

// Reset
document.getElementById('resetBtn').addEventListener('click', () => {
  if (!confirm('Reset progress and streak?')) return;
  state = {"completed":{}, "tasks":{}, "streak":0, "lastOpen":null, "notif":false, "current":1};
  localStorage.setItem(stateKey, JSON.stringify(state));
  document.querySelectorAll('.tasks input[type="checkbox"]').forEach(cb => cb.checked = false);
  updateProgress(); updateNotifUI(); updateStreak(); showDay(1);
});

// PWA SW
if ('serviceWorker' in navigator) navigator.serviceWorker.register('sw.js').catch(console.error);

// Init
updateProgress(); updateStreak(); showDay(state.current || 1);
</script>
</body>
</html>
